
<style>
  #desc_container p{
  margin-top: 1rem;
  margin-bottom: 2rem;
  line-height: 1.75
  }

  #desc_container p strong, #desc_container p b{
    color: #416a38;
  }

  #desc_container ul.literaturelist{
    display: none;
  }
  #desc_container div.youtube-responsive{
    display: none;
  }

</style>


  
  

{% assign all_specs = 'DHM Promos - List : dhm_promos ,
DHM Promos - Free Trial : dhm_promos_risk_free_trial ,
DHM Promos - Warranty : dhm_promos_warranty ,
DHM Promos - Free Gift : dhm_promos_free_gift ,
DHM Promos - Parts Code : dhm_promos_parts ,
Sound Levels : dhm_shared_sound_level ,
Altitude Adjustments : dhm_shared_altitude ,
Filters : dhm_shared_filter_types ,
Alerts : dhm_shared_alerts ,
HCPCS Code : dhm_general_hcpcs ,
In the Package : dhm_general_in_the_box ,
Intended Use : dhm_general_intended_use ,
Prescription Required : dhm_general_rx_required ,
Country : dhm_general_country ,
Compatibility : dhm_general_compatibility ,
DHM Phys - Activator : dhm_physical_activator ,
DHM Sizes - List : dhm_physical_sizes ,
Length : dhm_physical_length ,
Length (Depth) : dhm_physical_dimension_length ,
Width : dhm_physical_dimension_width ,
Height : dhm_physical_dimension_height ,
Sizes - Inner Diameter : dhm_physical_inner_diameter ,
Weight : dhm_physical_weight ,
Materials : dhm_physical_materials ,
Ingredients : dhm_physical_ingredients ,
DHM Sleep - Mask Type (Activator) : dhm_sleep_mask_type ,
DHM Sleep - Machine Modes (Activator) : dhm_sleep_machine_modes ,
Comfort Tech : dhm_sleep_machine_comfort_tech ,
Rainout Reduction : dhm_sleep_machine_rainout_reduction ,
Ramp : dhm_sleep_machine_ramp ,
Leak Compensation : dhm_sleep_machine_leak_compensation ,
Auto On Off : dhm_sleep_machine_auto_on_off ,
Oxygen Compatibility : dhm_sleep_machine_oxygen_compatibility ,
DHM Cannula - Prong Style (Activator) : dhm_oxygen_cannula_prong_style ,
Max Flow : dhm_oxygen_cannula_max_flow ,
Tubing Style : dhm_oxygen_cannula_tubing_style ,
Faceplate Width : dhm_oxygen_cannula_faceplate_width ,
Prong Length : dhm_oxygen_cannula_prong_length ,
Prong Width : dhm_oxygen_cannula_prong_width ,
DHM Concentrator - Type (Activator) : dhm_oxygen_machine_type ,
Continuous Range : dhm_oxygen_machine_continuous_range ,
Warmup Time : dhm_oxygen_machine_warmup_time ,
Concentration : dhm_oxygen_machine_concentration ,
OPI : dhm_oxygen_machine_opi ,
DHM Data - Included (Activator) : dhm_shared_data_included ,
Data Storage : dhm_shared_data_storage ,
Data Viewing Options : dhm_shared_data_viewing ,
Humidifier Compatibility : dhm_humidifier_compatibility ,
Humidifier Settings : dhm_humidifier_settings ,
Chamber Capacity : dhm_humidifier_chamber_capacity ,
Range (Activator) : dhm_power_ac_range ,
AC Power Cord Length : dhm_power_ac_length ,
AC Cord Weight : dhm_power_ac_weight ,
AC - Brick Dimensions : dhm_power_ac_brick_dimensions ,
DHM DC - Input (Activator) : dhm_power_dc_input ,
Cord Length : dhm_power_dc_length ,
DC - Cord Weight : dhm_power_dc_weight ,
AC - Consumption : dhm_power_ac_consumption ,
DC - Consumption : dhm_power_dc_consumption ,
DC - Brick Dimensions : dhm_power_dc_brick_dimensions ,
DHM Battery - Type (Activator) : dhm_power_battery_type ,
Battery Capacity : dhm_power_battery_capacity ,
Battery Life Cycles : dhm_power_battery_life_cycles ,
Battery Recharge Time : dhm_power_battery_recharge_time ,
Battery Run Time : dhm_power_battery_run_time ,
Battery Dimensions : dhm_power_battery_dimensions ,
Battery Weight : dhm_power_battery_weight ,
Battery Shipping Notice : dhm_power_battery_shipping_notice ,
DHM Gen - Model Sleep : dhm_general_product_model ,
DHM Concentrator - Pulse Range : dhm_oxygen_machine_pulse_range ,
DHM Cannula - Prong Separation : dhm_oxygen_cannula_prong_separation ,
DHM Gen - Product Type : dhm_general_product_type ,
DHM Cannula - Prong Profile Side : dhm_oxygen_cannula_prong_profile_side ,
DHM Promos - FAA : dhm_promos_faa ,
DHM Hum - Chamber Type : dhm_humidifier_chamber_type ,
DHM Neb - Liter Flow : dhm_nebulizer_liter_flow ,
DHM Neb - Pressure : dhm_nebulizer_pressure ,
DHM Neb - Nebulization Rate : dhm_nebulizer_nebulization_rate ,
DHM Neb - Median Diameter : dhm_nebulizer_median_diameter ,
DHM Neb - Modes of Operation : dhm_nebulizer_modes_of_operation ,
DHM Neb - Capacity : dhm_nebulizer_capacity ,
DHM Neb - Treatment Time : dhm_nebulizer_treatment_time ,
DHM Sleep - Pressure Range : dhm_sleep_pressure_range ,
DHM Sleep - Machine Tubing Compatibility : dhm_sleep_machine_tubing_compatibility ,
DHM Res - Description : dhm_shared_description ,
DHM Res - Videos : dhm_resources_videos ,
DHM Gen - Model Oxygen : dhm_general_product_model_oxygen ,
DHM Gen - Model Asthma : dhm_general_product_model_asthma ,
DHM Gen - Part Numbers : dhm_general_part_numbers ,
DHM Gen - GTINS : dhm_general_gtins ,
DHM O2 - Max Tubing Length : dhm_oxygen_maximum_tubing_length ,
DHM Neb - Respirable Fraction : dhm_nebulizer_respirable_fraction ,
DHM Res - PDF Files : dhm_resources_pdf_files ,
DHM Sleep - Mask Sizing Guide PDF : dhm_sleep_mask_sizing_guide_pdf' %}
<div style="display: none">
  
  
  
  {{ all_specs  }}


</div>
    {% comment %}
      We are using the charater count to make layout decisions.
      If the description is less than 1100 characters, we show the specs below description... 
      if it's bigger, we create a new row for specs that might also have videos and pdfs.
     {% endcomment %}
{% assign char_count = product.metafields.custom.dhm_shared_description.value | size %}

<div class="page-width">

  <div id="the_acc" class="twcss-space-y-6 twcss-bg-bgGray">
    <div class="twcss-flex twcss-mx-auto  "> 
    <!--Former Accordion -->

      <div id="description_details"  role="region" class=" twcss-w-full twcss-px-10 twcss-py-6 ">
        {% if char_count >= 1100 %}
           <h2 class=" twcss-text-4xl twcss-leading-relaxed twcss-text-primaryGreen twcss-italic">
            {{product.description}}
          </h2>
        {% endif %}

      <div class="twcss-pb-4 twcss-pt-6  twcss-w-full twcss-flex twcss-flex-col md:twcss-flex-row" >
        <div class="twcss-w-full md:twcss-w-3/5 twcss-py-5 twcss-pr-10"> 
        <div id="desc_container">
          {% if char_count <= 1100 %}
           <h2 class=" twcss-text-4xl twcss-leading-relaxed twcss-text-primaryGreen twcss-italic">
            {{product.description}}
          </h2>
        {% endif %}
          {{ product.metafields.custom.dhm_shared_description.value }}
          {% if char_count <= 1100 %}
         {% render 'specs-all' , product:product %}
          {% endif %}
        </div>
        </div>
        <div class="twcss-w-full md:twcss-w-2/5  md:twcss-pl-12 " > 
      {% if product.metafields["custom"]["dhm_promos_parts"] != blank %}
      {% assign part_collection = product.metafields["custom"]["dhm_promos_parts"] %}
      {% assign part_collection_len = collections[part_collection].all_products_count %}
      <h3 class=" twcss-text-3xl twcss-mb-8">{{ collections[part_collection].title }}</h3>
      {% comment %} <h4>Total Products in this Collection: {{ collections[part_collection].all_products_count }}</h4> {% endcomment %}
      <ul role="list" class="">
      {% for product in collections[part_collection].products  limit:5 %}
        
        <li class="twcss-flex twcss-gap-x-4 twcss-py-6 twcss-px-6 twcss-rounded-lg twcss-shadow-sm  twcss-bg-white twcss-mb-12">
          <img class="twcss-size-48 twcss-flex-none twcss-border" width="200px"
            height="200px" src="/cdn/shop/{{product.featured_image | image_url: 'small'}}" alt="{{product.featured_image.alt}}">
            
          <div class="twcss-min-w-0">
            <p class="twcss-text-3xl twcss-font-semibold twcss-text-gray-900 twcss-leading-[1.5]">
              <a href="{{product.url}}" class=" twcss-text-primaryGreen hover:twcss-text-primaryGreenDark">{{product.title}}</a>
            </p>
            <p class="twcss-mt-1 twcss-text-2xl twcss-text-gray-500">
              {{product.price | money}}
            </p>
          {% comment %}
            shorten product names: twcss-truncate 
          {% endcomment %}
          </div>
        </li>
        
     {% endfor %}
     </ul>
     {% comment %}
      only show this button if there are more that this limit
     {% endcomment %}
     {% assign max_prods = 4 %}
     {% if max_prods < part_collection_len %}
     
      <a href="/collections/{{part_collection}}" class=" twcss-bg-primaryGreen twcss-text-white twcss-p-10 twcss-flex twcss-items-center twcss-text-3xl twcss-mt-5 twcss-text-center">
      View All Parts</a>
     {% endif %}
     {% else %}
     <h3 class="twcss-text-3xl twcss-mb-8 twcss-mt-5">Popular Products</h3>
     <ul role="list" class="divide-y divide-gray-300">
     {% for product in collections['all'].products  limit:3 %}
      <li class="twcss-flex twcss-gap-x-4 twcss-py-6 twcss-px-6  twcss-rounded-md twcss-shadow-sm twcss-bg-white twcss-mb-12">
        <img class="twcss-size-48 twcss-flex-none twcss-border" width="200px"
          height="200px" src="/cdn/shop/{{product.featured_image | image_url: 'small'}}" alt="{{product.featured_image.alt}}">
        <div class="twcss-min-w-0">
          <p class="twcss-text-3xl twcss-font-semibold twcss-text-gray-900 twcss-leading-[1.5]">
            <a href="{{product.url}}" class=" twcss-text-primaryGreen hover:twcss-text-primaryGreenDark">{{product.title}}</a>
          </p>
          <p class="twcss-mt-1 twcss-text-2xl  twcss-text-primaryGreen">
            {{product.price | money}}
          </p>
        {% comment %}
          shorten product names: twcss-truncate 
        {% endcomment %}
        </div>
      </li>
      {% endfor %}
      </ul>
    {% endif %}

    </div>
  </div>

  </div>
</div>
{% if char_count >= 1100 %}
<div class="twcss-w-full twcss-px-10 twcss-py-6 twcss-bg-bgGray twcss-flex twcss-flex-col md:twcss-flex-row">
  <div class="twcss-w-full md:twcss-w-3/5 twcss-py-5"> 
  <div>
    <div class="twcss-px-4 md:twcss-px-0">
      <h3 class="twcss-text-3xl twcss-p-4 twcss-mb-3 twcss-font-semibold  twcss-text-primaryGreen">Specifications</h3>
    </div>
    <div class="twcss-overflow-hidden twcss-bg-white twcss-shadow sm:twcss-rounded-lg twcss-mt-8">
      <!-- All Specs -->
     {% render 'specs-all' , product:product %}
      </div>
    </div>
  </div>
  <div class="twcss-w-full md:twcss-w-2/5  " > 
  {% if product.metafields.custom.dhm_resources_pdf_files !=null %}
    <ul class="twcss-ml-10 twcss-p-10">
      <h3 class=" twcss-mb-10 twcss-text-primaryGreen twcss-font-bold">PDF Resources</h3>
    {% for metavalue in product.metafields.custom.dhm_resources_pdf_files.value  %}
      <li class="twcss-mb-4">
      <a href="{{metavalue.url}}" alt="{{metavalue.alt}}" class="twcss-text-primaryGreen hover:twcss-text-primaryGreenDark twcss-text-2xl">
        {% if metavalue.alt !=null %}
          {{metavalue.alt}}
        {% else %}
          No Name Given: Click Here
        {% endif %}
      </a>
      </li>
      {% endfor %}
      </ul>
    {% endif %}
  <br/>
<div class=" twcss-ml-10 twcss-p-10"  x-data="{ modalOpen: false }">
<!-- 1. The button --> 
  {% for videoid in product.metafields.custom.dhm_resources_videos.value %}
   
    {% assign videoid2 = videoid | replace_first: '_', '*' %}
  
    {% assign the_title = videoid2 | split: '*' | first %}
    {% assign the_id = videoid2 | split: '*' | last %}
    {% if the_id == null %}
      {% assign the_id = videoid %}
    {% endif %}
    {% comment %} {{ videoid }} {% endcomment %}
{% if the_title != null %}
  <h3 class="twcss-text-2xl twcss-mb-8 twcss-text-gray-500">
    {{ the_title }}
  </h3> 
    
   {% endif %}
   
  <button
    class="twcss-relative twcss-flex twcss-justify-center twcss-items-center focus:twcss-outline-none focus-visible:twcss-ring focus-visible:twcss-ring-indigo-300 twcss-rounded-3xl twcss-mb-10 twcss-group"
    @click="modalOpen = true; showVideo('{{the_id}}')"
    aria-controls="modal"
    aria-label="Watch the video"
> 
    <img class="twcss-rounded-3xl twcss-shadow-2xl twcss-transition-shadow twcss-duration-300 twcss-ease-in-out vidThumnail" src="https://img.youtube.com/vi/{{ the_id }}/hqdefault.jpg" width="768" height="432" alt="Modal video thumbnail" />
    <!-- Play icon -->
    <svg class="twcss-absolute twcss-pointer-events-none group-hover:twcss-scale-110 twcss-transition-transform twcss-duration-300 twcss-ease-in-out" xmlns="http://www.w3.org/2000/svg" width="72" height="72">
        <circle class="twcss-fill-white" cx="36" cy="36" r="36" fill-opacity=".8" />
        <path class="fill-indigo-500 drop-shadow-2xl" d="M44 36a.999.999 0 0 0-.427-.82l-10-7A1 1 0 0 0 32 29V43a.999.999 0 0 0 1.573.82l10-7A.995.995 0 0 0 44 36V36c0 .001 0 .001 0 0Z" />
    </svg>
</button>
   
  {% endfor %} 

<!-- 2. The backdrop layer --> 
<div x-show="modalOpen" class="twcss-fixed twcss-inset-0 twcss-z-[99999] twcss-bg-black twcss-bg-opacity-50 twcss-transition-opacity">
<!-- 3. The modal video -->
<div id="modal" x-show="modalOpen"  class="twcss-fixed twcss-inset-0 twcss-z-[99999] twcss-flex twcss-p-6" role="dialog" aria-modal="true">
    <div class=" twcss-mx-auto twcss-h-full twcss-flex twcss-items-center">
        <div  @click.outside="modalOpen = false; hideVideo()"
            @keydown.escape.window="modalOpen = false; hideVideo()" id="video-container" class="twcss-w-full twcss-max-h-full twcss-rounded-3xl twcss-shadow-2xl twcss-aspect-video twcss-bg-black twcss-overflow-hidden">
        </div>
    </div>
</div>
<!-- closing the modal backdrop div -->
    </div>
<!-- closing the x-data div -->
    </div>

  </div>
{% comment %}
closes the check for the charater count
  {% endcomment %}
  {% endif %}
  </div>
      <!-- end #the_acc div above-->
</div>
<!-- end  .page-width div -->
  
  <script>
    function showVideo(videoId) {
      console.log(videoId);
      
      const videoContainer = document.getElementById('video-container');
      videoContainer.innerHTML = `
        <iframe width="1280" height="720"
          src="https://www.youtube.com/embed/${videoId}?autoplay=1"
          frameborder="0"
          allow="autoplay; encrypted-media"
          allowfullscreen>
        </iframe>
      `;
    }
    function hideVideo() {
      const videoContainer = document.getElementById('video-container');
      videoContainer.innerHTML = '';
    }
    {% comment %} (async() => {
      // Code to be executed - the json filter lets you use liquid in javascript
      const videoIds = {{ product.metafields.custom.dhm_resources_videos.value | json }};
      console.log(videoIds);
      const thumbnailsContainer = document.getElementById('video-thumbnails');
      const videoContainer = document.getElementById('video-container');
    
      await videoIds.forEach(id => {
        const img = document.createElement('img');
        img.src = `https://img.youtube.com/vi/${id}/0.jpg`;
        img.className = 'yt-thumbnail';
        img.width = 200;
        img.onclick = () => {
          modalOpen = true;
          showVideo(id)
           videoContainer.innerHTML = `
            <iframe width="560" height="315"
              src="https://www.youtube.com/embed/${id}?autoplay=1"
              frameborder="0"
              allow="autoplay; encrypted-media"
              allowfullscreen>
            </iframe>
          `; 
        };
        console.log(img);
        thumbnailsContainer.appendChild(img);
      });
    })(); {% endcomment %}
      </script>
  <!-- end all acccordion above -->
